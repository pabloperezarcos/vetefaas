-- CREA LA TABLA 'usuarios'
CREATE TABLE usuarios (
    id_usuario NUMBER GENERATED BY DEFAULT AS IDENTITY,
    nombre VARCHAR2(100) NOT NULL,
    email VARCHAR2(100) UNIQUE NOT NULL,
    PRIMARY KEY (id_usuario)
);

-- CREA LA TABLA 'roles'
CREATE TABLE "ROLES" (
    id_rol NUMBER GENERATED BY DEFAULT AS IDENTITY,
    rol VARCHAR2(100) NOT NULL,
    PRIMARY KEY (id_rol)
);

-- CREA LA TABLA 'usuario_roles'
CREATE TABLE usuario_roles (
    usuario_id NUMBER NOT NULL,
    rol_id NUMBER NOT NULL,
    CONSTRAINT fk_usuario FOREIGN KEY (usuario_id) REFERENCES usuarios(id_usuario),
    CONSTRAINT fk_rol FOREIGN KEY (rol_id) REFERENCES "roles"(id_rol),
    CONSTRAINT pk_usuario_roles PRIMARY KEY (usuario_id, rol_id)
);

-- INSERTA ROLES INICIALES
INSERT INTO roles (rol) VALUES ('Administrador');
INSERT INTO roles (rol) VALUES ('Veterinario');
INSERT INTO roles (rol) VALUES ('Cliente');